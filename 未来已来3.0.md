Generate a creative reason or excuse for the given event. Be creative and be funny. Let your imagination run wild.
Event: I am running late.
Excuse: I was being held ransom by giraffe gangsters.
Event: I forgot to reply to your message.
Excuse: I apologize for not getting back to you earlier, but I was abducted by a pack of rogue robots and forced to participate in an intergalactic dance competition. It was a close call, but thankfully I won the contest and was able to escape with my life.

### 图12-15 在ChatGPT中的实践效果2

正确的举例对GPT等大语言模型作出正确的响应来说至关重要。

### 12.2.3 用GPT优化工作流

对于前端开发等编程工作来说，GPT是一款利器。它和我们之前使用的开发辅助工具不同，并不是针对某一研发环节进行优化的，如IDE对于编码工作，调试器对于Debug工作等，而是可以帮助我们优化整体的开发工作流。

事实上，Copilot X在这方面已经为开发者提供了全面支持，旗下的Copilot Chat、Copilot for Pull Request、Copilot CLI和Copilot Doc已经覆盖了从开发、测试到文档生成的各个环节。开发者要了解如何与GPT进行更有效的交流来提升开发效率。

以ChatGPT为例，它可以在技术调研、工程开发两个方面帮助程序员提升工作效率。

#### 1. 技术调研

在大语言模型没有展现出如此惊艳的能力之前，程序员主要依赖搜索引擎进行技术调研。这里的搜索引擎不仅包括谷歌、百度、必应等通用搜索引擎，还包括许多与编程相关站点的内置搜索引擎，如GitHub、StackOverflow、稀土掘金和CSDN等。

ChatGPT刚出现不久，便引发了人们对其和搜索引擎之间关系的热议，其中最常问到的问题：ChatGPT是否会在未来取代搜索引擎？

关于这个问题，我们必须先对比ChatGPT和搜索引擎的区别，特别是在信息获取层面。在2023年年初，Google Bard（Google自主研发的大语言模型）的发布会上，发布者指出了大语言模型特别适合回答NORA（Not One Right Answer）类型的问题，即那些没有唯一正确答案的问题。类似ChatGPT的大语言模型擅长给出完整的方案，搜索引擎提供的是碎片化的信息。用户在搜索时，就像在破案，每次搜索得到的只是一些零碎的线索和断片信息，解决的也只是用户想要探究领域的某个分支问题。最终，人类需要整合搜索结果来得出结论。

简而言之：ChatGPT特别适合给出启发，而搜索引擎更擅长给出材料。

但这并不意味着无法像使用搜索引擎一样使用ChatGPT，完全可以让ChatGPT帮我们进行“枚举”，如枚举解决方案，或者枚举解决问题的思路，如图12-16所示。

### 图12-16 让ChatGPT枚举解决方案

我现在想用一款前端推理引擎来实现物体识别的功能，请问有哪些技术选型方案？

针对物体识别的前端推理引擎，以下是一些可能的技术选型方案：

（1）TensorFlow.js：这是谷歌开发的一个基于JavaScript的机器学习库，支持在浏览器和Node.js环境下进行深度学习的训练和推理，包括图像分类、物体检测等任务。TensorFlow.js支持预训练模型，也可以使用自定义模型进行推理。

（2）ONNX.js：这是微软开发的一个基于JavaScript的深度学习推理引擎，支持在浏览器和Node.js环境下进行深度学习的推理，包括图像分类、物体检测等任务。ONNX.js支持使用ONNX格式的模型进行推理，同时可以转换其他常见深度学习框架的模型为ONNX格式进行推理。 

（3）Keras.js：这是一个基于JavaScript的深度学习库，支持在浏览器和Node.js环境下进行深度学习的推理，包括图像分类、物体检测等任务。Keras.js支持预训练的Keras模型，也可以使用自定义的Keras模型进行推理。

（4）Caffe.js：这是一个基于JavaScript的深度学习库，支持在浏览器和Node.js环境下进行深度学习的推理，包括图像分类、物体检测等任务。Caffe.js支持使用Caffe模型进行推理。 

（5）Paddle.js：这是一个基于百度深度学习框架PaddlePaddle的JavaScript库，可以在浏览器端和移动端上进行深度学习的推理，如图像分类、目标检测、语义分割等任务。Paddle.js的优点之一是提供了一个基于PaddlePaddle的深度学习模型库，包含许多预训练的深度学习模型，可以直接使用或在此基础上进行微调，同时支持自定义模型的导入和使用。

以上推理引擎都支持在浏览器中进行物体识别，可以通过JavaScript的API进行调用，对于不同的场景和任务，可以根据需要选择不同的推理引擎。


在教育学里，针对提问方法，有一个特别推崇的原则是“启发式提问”。启发式提问的一个特点是问题往往是开放的，而非闭合的。以“推理引擎技术选型”为例，如果在进行技术调研时直接问某种框架是否适合给定的开发场景，则无法启发大语言模型给出丰富的答案。

在技术调研过程中，除了利用“枚举”型提示语来发挥大语言模型百科全书式的知识供给能力，还有其他几条提示语的优化方法。

- **第一种是提供线索而非结论**。ChatGPT等大语言模型对时效性内容的支持程度不够好，微软Bing的新一代生成式搜索引擎已经很好地整合了时效性内容和大语言模型的返回结果。但是，当想要获取更多的时效性内容，或者想要知道具体知识点所覆盖的“查询路径”时，可以让ChatGPT提供线索，而非直接给出结论，如图12-17所示。

### 图12-17 让ChatGPT提供线索而非结论

如果我想要了解前端推理引擎相关的背景知识，那么我应该针对搜索引擎提哪些关键词呢？

以下是一些可能的关键词，您可以在搜索引擎中使用它们来了解与前端推理引擎相关的背景知识：

- 深度学习前端推理
- JavaScript深度学习
- 深度学习在浏览器中的应用
- TensorFlow.js
- ONNX.js
- Keras.js
- Caffe.js
- Paddle.js
- 深度学习模型部署
- 前端神经网络
- 模型转换
- 模型优化
- WebAssembly

通过这些关键词，您可以找到相关的教程、文档、论文和其他有用的资源，帮助您了解前端推理引擎及其相关技术。

- **第二种是提供充分的背景信息**。前文“ABCD”原则中提到了背景信息的重要性。在进行技术调研的过程中，提供背景信息时要尽量满足“3W”原则。

    - **Why**：你为什么有这样的需求。

    - **What**：你想要做什么事情。 

    - **Where**：你的环境（或者说你拥有的资源）是什么样的。

下面仍以前端推理引擎为例进行说明，如图12-18所示。

### 图12-18 通过提供背景信息进行技术决策

我要利用paddle.js等前端推理引擎开发项目，为了保证性能，我希望支持桌面Chrome 55以上版本，IOS浏览器以及Android 12以上的系统浏览器，请问我该如何配置代码来控制JS的兼容性？

要控制JavaScript的兼容性，您可以使用Babel，Babel是一个JavaScript编译器，它可以将新版本的JavaScript代码转换为向后兼容的代码，从而保证代码在各种浏览器和平台上都能运行。

以下是一些步骤来使用Babel控制JavaScript的兼容性：

1. 安装Babel

安装Babel可以使用npm或yarn。您可以运行以下命令来安装Babel：

```bash
npm install --save-dev @babel/core @babel/cli @babel/preset-env
```

- **第三种是循循善诱**。前文提到了分治思想在多轮对话中的作用。事实上，技术调研通常需要多轮交互才能得出可以落地的技术方案。
在与ChatGPT等大语言模型交互时，也要通过任务拆分，来对大语言模型“循循善诱”。特别是在进行方向不确定的技术调研时，不妨把与ChatGPT的交互拆分为以下两个动作。
   
    - 给出领域内解决该问题的方案选型。这里要遵从前面提到的“提供线索而非结论”的原则，让大语言模型能够输出多种解决方案。
    
    - 针对某种方案选型通过多轮对话了解方案全貌。针对一个技术方向的追问，可以让我们充分了解其中的细节，甚至找出大语言模型在回答问题中的思维链，分解其决策过程，强化我们对于某个技术方向的认知。

通过上述方法，可以让技术调研游刃有余。需要强调的是，ChatGPT等大语言模型在回答问题时的准确性还存在不少问题，需要仔细甄别。

#### 2. 工程开发

许多程序员已经感受到了Copilot带来的开发体验的革新。GPT对上下文的理解能力，大大加强了编程提示功能。针对一段注释或一个命名函数，GPT就可以预测并“追加”出你想要的代码。

GPT可以在以下三个层面提升开发效率。

- **功能点**：GPT有许多有代表性的能力，如“正则表达式”“构建HTTP请求”“初始化某三方库”等。例如，我们可以让ChatGPT提供模型前处理需要的Canvas，并把用户上传的图片加载其中，如图12-19所示。

### 图12-19 ChatGPT给出功能点代码及实现思路

请为我用JavaScript创建一个Canvas，支持用户上传图片，并将图片放入该Canvas中，Canvas大小需要匹配图片大小，同比例缩放到宽高都不超过500px。

**JavaScript代码**：
```javascript
// 获取Canvas元素和文件输入元素
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const imageLoader = document.getElementById('imageLoader');

// 当用户选择图片时执行
imageLoader.addEventListener('change', (e) => {
    const file = e.target.files[0];

    // 读取图片并绘制到Canvas中
    const img = new Image();
    img.onload = () => {
        // 计算图片缩放比例
        const ratio = Math.min(500 / img.width, 500 / img.height);

        // 缩放图片并居中放置在Canvas中央
        const width = img.width * ratio;
        const height = img.height * ratio;
        const x = (canvas.width - width) / 2;
        const y = (canvas.height - height) / 2;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, x, y, width, height);

        // 更新Canvas尺寸
        canvas.width = width;
        canvas.height = height;
    };

    // 将图片读入Image对象中
    const reader = new FileReader();
    reader.onload = (event) => {
        img.src = event.target.result;
    };
    reader.readAsDataURL(file);
});
```

**解释一下这段代码的执行过程**：

（1）首先获取Canvas元素和文件输入元素，并注册文件输入元素的“change”事件。

（2）当用户选择图片时，先读取图片并绘制到Canvas中，这里使用“FileReader”对象读取文件，再将读取到的数据作为“image”对象的“src”属性，即可将图片加载到内存中。

（3）一旦图片加载完成，就可以计算图片的缩放比例，并将图片按比例缩放宽中放置在Canvas中央。这里使用Canvas的“drawImage”方法来绘制图片。

（4）最后，更新Canvas的尺寸为缩放后的图片尺寸。

- **模块实现**：对于收敛于独立功能模块的代码，ChatGPT可以帮助开发者编写整个代码模块，甚至只需要微调生成的代码即可。此外，开发者还可以就模块的具体实现提出额外的要求。例如，可以让ChatGPT使用paddle.js中的MobileNet模型来实现一个JavaScript模块，该模块支持传入图片地址，并直接返回物品信息，如图12-20所示。

### 图12-20 实现一个物品分类的JavaScript模块

通过paddle.js使用mobilenet模型来实现一个物品分类的JavaScript模块，要求模块暴露出的方法支持传入图片地址，并且直接返回物品信息。

根据您的要求，以下是一个使用“@paddlejs-models/mobilenet”实现的JavaScript模块示例。

（1）首先，请确保你已经安装了“@paddlejs-models/mobilenet”库。

```bash
npm install @paddlejs-models/mobilenet
```

（2）编写JavaScript模块。（此处代码省略部分内容）

现在，你可以在其他JavaScript文件中导入并使用“classifyImage”函数，例如：

```javascript
import { classifyImage } from './mobilenetClassifier';

(async () => {
    const imageUrl = 'https://example.com/path/to/image.jpg';
    const result = await classifyImage(imageUrl);
    console.log(result);
})();
```
这将输出识别到的物品信息，包括类别索引、标签和概率。

- **代码及周边优化**：Copilot X提供了单元测试生成和文档生成等功能，让我们能够快速完善整个工程，并且产出高质量的代码。当然，对开发者来说，最直接的帮助莫过于针对已编写的代码进行直接优化。例如，针对排序方法，ChatGPT可以提供优化建议，并指出可能存在的代码漏洞，如图12-21所示。
我们可以发挥GPT基于One-Shot或Few-Shot的强大的扩展编程能力，即给出一个或几个例子，让GPT写出符合规则的代码，如图12-22所示。

### 图12-21 优化代码

请帮我优化以下代码：

```javascript
function orderArray(arr) {
    for (var i = 0; i < arr.length; i++) {
        for (var j = 0; j < arr.length; j++) {
            if (arr[i] < arr[j]) {
                var temp = arr[j];
                arr[j] = arr[i];
                arr[i] = temp;
            }
        }
    }
    return arr;
}
```
这段代码实现了一个简单的选择排序算法，但是它有一些性能问题：
（1）时间复杂度为O(n^2)，当输入数组较大时，算法的性能会非常低下。
（2）没有对数组进行判空，当传入空数组时会出现问题。
（3）没有返回排序后的数组，需要在函数外手动访问原数组才能获取排序结果。

**以下是优化建议**：

（1）改用更高效的排序算法，如快速排序、归并排序等，可以将时间复杂度降到O(nlogn)级别。

（2）添加数组非空判断，当传入空数组时，可以直接返回空数组或抛出异常。

（3）返回排序后的数组，可以让函数的使用更加方便。

**以下是优化后的代码示例**：
```javascript
function quickSort(arr) {
    if (arr.length <= 1) {
        return arr;
    }
    // 此处省略部分代码
}
```

### 图12-22 让GPT写出符合规则的代码
（图中展示了几个代码示例相关内容，由于内容显示问题未完整记录，但原书有对应展示 ）

这特别适合我们希望通过固定模式（如针对某个基类）来编写新代码的场景。如果对于历史代码，我们也希望采用同样的模式扩展开发，则必须给出尽可能准确的说明。当然，类似的功能在Copilot等工具中也有对应的包装。需要注意的是，必须提供准确且明晰的样例，以便GPT理解如何生成符合要求的代码。

### 12.3 关于未来的畅想

我们不得不承认：通用人工智能（Artificial General Intelligence，AGI）的时代已经到来。在ChatGPT横空出世之前，人们还认为AGI是遥不可及的事情。

对于一些职位（如律师、客服和行政人员）来说，大语言模型带来的冲击是巨大的。一般具有以下五类特征的工作容易被大语言模型替代。

- **重复性高**：ChatGPT等工具可以替代重复性高的工作，如文本输入和处理、文件整理和排序、简单的数据分析等。这些工作通常需要耗费大量的时间和人力，并且容易出错。大语言模型可以显著提高这些工作的效率并降低错误率。 

- **规则性强**：需要遵循特定规则和流程的工作可能会被ChatGPT等工具替代，包括客服、电话销售、问答平台等。这些工作需要与用户沟通，并根据用户的需求提供相应的回答或服务。通过使用ChatGPT等工具，可以自动对话，并提供相应的回答或服务，从而节省时间和人力。

力成本。

- **模式识别**：需要进行模式识别的工作可能会被ChatGPT等工具替代。这些工作包括图像识别、语音识别等。这些工作需要对大量数据进行处理和分析，并识别其中的模式。通过使用ChatGPT等工具，可以自动进行数据分析和模式识别，从而节省大量时间和人力成本。此外，像医疗诊断等需要大量医学知识和经验的工作，大语言模型也可以自动分析患者的症状和病史，进行医学图像诊断，并提供相应的诊断建议，大大减轻医生的工作负担，并提高诊断的准确性。
2023年3月26日，Twitter用户Cooper发文称GPT-4救了他家宠物狗的命（GPT-4 saved my dog's life）。一开始，兽医误诊Cooper的宠物狗为寄生虫病。但当Cooper把宠物狗的血液化验单结果输入给GPT-4并提问时，GPT-4给出了IMHA（免疫性溶血性贫血）的诊断建议，经过医生的对症下药，Cooper的宠物狗奇迹般地康复了。

### 图12-23 被GPT-4“拯救”的宠物狗

（此处有一张宠物狗的黑白照片 ）


- **文字处理**：需要进行大量文本处理的工作可能会被ChatGPT等工具替代。这些工作包括新闻摘要、机器翻译和文章写作等。这些工作需要对大量文本进行处理和分析，并提供相应的回答或服务。通过使用ChatGPT等工具，可以自动生成文章、进行文本翻译和生成摘要等，从而节省时间和人力成本。例如，撰写法律文书的工作需要遵循特定的格式和法律规则。大语言模型可以自动生成法律文书，从而减轻律师的工作负担，并自动学习法律规则和案例，提供相应的法律建议和支持。 

- **数据分析**：需要进行大量数据分析和预测的工作，如金融预测、市场分析等，可能会被ChatGPT等工具替代。大语言模型可以通过学习大量的数据，自动分析和预测，并提供决策支持。例如，财务审计等烦琐且需要耗费大量人力的工作，通过使用ChatGPT等工具，可以自动进行数据分析和预测，并检测出异常数据，大大提高审计的准确性和效率。

需要明确的是，对一些职业和岗位的冲击只是GPT等大语言模型对人类社会影响的表层影响。最需要令人深思的是，当AGI快速发展时，整个人类社会的结构是否会发生变化？

赫拉利在他的《人类简史》中提到，智人之所以能够淘汰尼安德特等其他人种统治地球，是因为想象力。想象我们是一个共同体，从而一同协作推进文明发展。而想象力的基石是人类强大的语言能力，以及由语言产生的文字带来的知识的传承和应用。


当知识、语言能力，甚至想象力都不再属于人类的专利时；当大语言模型能以远超人类极限的速度获取知识并融会贯通时，我们真的应该思考当下知识的生产和传承模式是否需要革新。

- **首先是知识的普及**。大语言模型使得大量知识的获取变得更加容易。人们可以在短时间内获得相关领域的专业知识，减少了查找资料的时间，提高了效率。例如，ChatGPT等工具就像人类的第三个大脑，省去了我们不少记忆和储备知识的时间。 

- **其次是知识的传承**。在教育实践领域，大语言模型能够为教育者提供个性化的教学支持，助力课堂教学，并为学生提供实时反馈，促使教育者重新思考教学方法和课程设计。当ChatGPT等工具能够把传统的靠大量时间学习才能获取的知识轻松地赋予每个个体时，教育的目标也会把重心从知识获取迁移为灵活运用。 

- **然后是围绕知识的跨学科和跨语言交流合作**。大语言模型能够理解和处理多领域的知识，有助于跨学科的研究和应用。这使得不同领域的专家更容易合作，加速创新。此外，它还可以帮助翻译和传播不同语言和文化的知识，促进全球文化交流，有助于保护和传承濒临消失的语言和文化。 

- **最后是知识的创新**。大语言模型可以帮助研究人员发现新的联系、概念和视角，从而激发创新。通过提供大量的信息，它可以拓展研究人员的思考边界，促进新想法的诞生。很多时候，人类创新的瓶颈在于个体涉猎的知识领域有盲区，而大语言模型可以帮助研究人员填补这些盲区，从而进发出更激烈的思维火花。

### 12.4 给前端工程师的建议

作者经历过Web开发早期的“草莽时代”。当时，前端开发环境的兼容性、工程化和技术框架等问题都还没有得到很好的解决。那时的前端工程师的主要职责是编写满足产品需求的脚本和符合设计要求的样式。对于一些边界问题，前端工程师更倾向于在技术社区或身边的技术专家中寻求答案。

后来，以AngularJS、Vue和React为代表的前端技术框架蓬勃发展，前端工程师能够更加专注地实现业务功能。与此同时，工程师们更注重文档和开源仓库建设，开发者可以从GitHub和项目官网获取准确的资料，并以此为基础提升研发效率。事实上，大语言模型之所以能在编程领域涌现出如此多超乎预期的能力，是因为这些丰富而规范的互联网资源的存在。

如今，随着AGI野蛮生长的新时代的到来，我们与知识，特别是开发类知识的关系发生了根本的改变。这些知识从需要我们主动获取变成了“入侵”我们工作的各个环节，换言之，我们之间的关系从“依存”变成了“共生”。 

未来已来，我们需要放下对AGI的偏见和抵触，积极拥抱变化，让ChatGPT等工具更好地为我们的开发工作服务。我们不仅要成为一名优秀的前端工程师，还要成为一名优秀的指令工程师，学会如何驱动大语言模型为自己所用。可以预见的是，在不久的将来，这种变化将导致大量的人失业；同时，也将创造大量的岗位。这种变化不仅是剧烈的，而且是快速的。 
借用温斯顿·丘吉尔的话，我们互相勉励：To improve is change; to be perfect is to change often.（追求进步，莫不求变；欲臻完美，变化无常。——ChatGPT翻译） 
